'use strict';const a393_0x2eadd9=a393_0xf6c0;function a393_0xf6c0(_0x275211,_0x6390c3){const _0x547af4=a393_0x547a();return a393_0xf6c0=function(_0xf6c075,_0x29726b){_0xf6c075=_0xf6c075-0xfa;let _0x3deb59=_0x547af4[_0xf6c075];return _0x3deb59;},a393_0xf6c0(_0x275211,_0x6390c3);}function a393_0x547a(){const _0x391722=['3266500uyJHjA','stack','(no\x20error\x20message)','pid','argv','nextTick','winston:\x20exitOnError\x20cannot\x20be\x20true\x20with\x20no\x20exception\x20handlers.','warn','once','_ending','113722LtvxHO','log','unhandle','finish','cwd','getTrace','getFunctionName','5619pOFweh','./exception-stream','filter','_uncaughtException','getMethodName','get','getLineNumber','\x20\x20No\x20stack\x20trace','exitOnError','isNative','version','692VsbhWB','755993jezDGo','_exiting','function','forEach','map','getColumnNumber','@dabh/diagnostics','set','getFileName','bind','length','process._exiting','finished','from','8NxSBUu','string','removeListener','transport','pipe','417768VSsInm','231HIzpNI','getgid','async/forEach','10YlipjG','_addHandler','handleExceptions','winston:exception','error','4380iaMBiv','getOsInfo','1410tQfNVY','one-time','loadavg','doExit','unpipe','has','logger','handlers','parse','memoryUsage','2381094wvMwzR','catcher','getProcessInfo','values','getuid','getAllInfo','uncaughtException','uptime'];a393_0x547a=function(){return _0x391722;};return a393_0x547a();}(function(_0x2b67a6,_0x518ede){const _0x27b105=a393_0xf6c0,_0x1cab73=_0x2b67a6();while(!![]){try{const _0xeef6f7=parseInt(_0x27b105(0x115))/0x1*(-parseInt(_0x27b105(0x13f))/0x2)+parseInt(_0x27b105(0x11c))/0x3*(-parseInt(_0x27b105(0x127))/0x4)+parseInt(_0x27b105(0x146))/0x5*(-parseInt(_0x27b105(0x144))/0x6)+-parseInt(_0x27b105(0x128))/0x7*(-parseInt(_0x27b105(0x136))/0x8)+parseInt(_0x27b105(0x103))/0x9+parseInt(_0x27b105(0x10b))/0xa+parseInt(_0x27b105(0x13c))/0xb*(parseInt(_0x27b105(0x13b))/0xc);if(_0xeef6f7===_0x518ede)break;else _0x1cab73['push'](_0x1cab73['shift']());}catch(_0x7e86ce){_0x1cab73['push'](_0x1cab73['shift']());}}}(a393_0x547a,0x51022));const os=require('os'),asyncForEach=require(a393_0x2eadd9(0x13e)),debug=require(a393_0x2eadd9(0x12e))(a393_0x2eadd9(0x142)),once=require(a393_0x2eadd9(0xfa)),stackTrace=require('stack-trace'),ExceptionStream=require(a393_0x2eadd9(0x11d));module['exports']=class ExceptionHandler{constructor(_0x533cbd){const _0x53776b=a393_0x2eadd9;if(!_0x533cbd)throw new Error('Logger\x20is\x20required\x20to\x20handle\x20exceptions');this[_0x53776b(0xff)]=_0x533cbd,this[_0x53776b(0x100)]=new Map();}['handle'](..._0x496289){const _0x1355c4=a393_0x2eadd9;_0x496289[_0x1355c4(0x12b)](_0x5b5cfe=>{const _0x50eb69=_0x1355c4;if(Array['isArray'](_0x5b5cfe))return _0x5b5cfe['forEach'](_0x1f8f84=>this['_addHandler'](_0x1f8f84));this[_0x50eb69(0x140)](_0x5b5cfe);}),!this[_0x1355c4(0x104)]&&(this['catcher']=this[_0x1355c4(0x11f)][_0x1355c4(0x131)](this),process['on']('uncaughtException',this[_0x1355c4(0x104)]));}[a393_0x2eadd9(0x117)](){const _0x318e6c=a393_0x2eadd9;this[_0x318e6c(0x104)]&&(process[_0x318e6c(0x138)](_0x318e6c(0x109),this[_0x318e6c(0x104)]),this['catcher']=![],Array[_0x318e6c(0x135)](this['handlers'][_0x318e6c(0x106)]())[_0x318e6c(0x12b)](_0x3c4211=>this[_0x318e6c(0xff)][_0x318e6c(0xfd)](_0x3c4211)));}[a393_0x2eadd9(0x108)](_0x1adae3){const _0x48d061=a393_0x2eadd9;let _0x1d93f8=null;return _0x1adae3&&(_0x1d93f8=typeof _0x1adae3===_0x48d061(0x137)?_0x1adae3:_0x1adae3['message']),{'error':_0x1adae3,'level':_0x48d061(0x143),'message':['uncaughtException:\x20'+(_0x1d93f8||_0x48d061(0x10d)),_0x1adae3&&_0x1adae3['stack']||_0x48d061(0x123)]['join']('\x0a'),'stack':_0x1adae3&&_0x1adae3[_0x48d061(0x10c)],'exception':!![],'date':new Date()['toString'](),'process':this[_0x48d061(0x105)](),'os':this[_0x48d061(0x145)](),'trace':this['getTrace'](_0x1adae3)};}[a393_0x2eadd9(0x105)](){const _0x59db79=a393_0x2eadd9;return{'pid':process[_0x59db79(0x10e)],'uid':process[_0x59db79(0x107)]?process[_0x59db79(0x107)]():null,'gid':process[_0x59db79(0x13d)]?process[_0x59db79(0x13d)]():null,'cwd':process[_0x59db79(0x119)](),'execPath':process['execPath'],'version':process[_0x59db79(0x126)],'argv':process[_0x59db79(0x10f)],'memoryUsage':process[_0x59db79(0x102)]()};}[a393_0x2eadd9(0x145)](){const _0x4b7dd8=a393_0x2eadd9;return{'loadavg':os[_0x4b7dd8(0xfb)](),'uptime':os[_0x4b7dd8(0x10a)]()};}[a393_0x2eadd9(0x11a)](_0x552ef2){const _0x48ec09=a393_0x2eadd9,_0x5a07a2=_0x552ef2?stackTrace[_0x48ec09(0x101)](_0x552ef2):stackTrace[_0x48ec09(0x121)]();return _0x5a07a2[_0x48ec09(0x12c)](_0x284117=>{const _0x3a6e13=_0x48ec09;return{'column':_0x284117[_0x3a6e13(0x12d)](),'file':_0x284117[_0x3a6e13(0x130)](),'function':_0x284117[_0x3a6e13(0x11b)](),'line':_0x284117[_0x3a6e13(0x122)](),'method':_0x284117[_0x3a6e13(0x120)](),'native':_0x284117[_0x3a6e13(0x125)]()};});}[a393_0x2eadd9(0x140)](_0x438c7e){const _0x23af86=a393_0x2eadd9;if(!this[_0x23af86(0x100)][_0x23af86(0xfe)](_0x438c7e)){_0x438c7e['handleExceptions']=!![];const _0x45f489=new ExceptionStream(_0x438c7e);this[_0x23af86(0x100)][_0x23af86(0x12f)](_0x438c7e,_0x45f489),this[_0x23af86(0xff)][_0x23af86(0x13a)](_0x45f489);}}[a393_0x2eadd9(0x11f)](_0x28cf15){const _0x4dc6d9=a393_0x2eadd9,_0x12d164=this['getAllInfo'](_0x28cf15),_0x74d86a=this['_getExceptionHandlers']();let _0x2fa605=typeof this['logger'][_0x4dc6d9(0x124)]===_0x4dc6d9(0x12a)?this['logger']['exitOnError'](_0x28cf15):this[_0x4dc6d9(0xff)][_0x4dc6d9(0x124)],_0x1761cb;!_0x74d86a[_0x4dc6d9(0x132)]&&_0x2fa605&&(console[_0x4dc6d9(0x112)](_0x4dc6d9(0x111)),console[_0x4dc6d9(0x112)]('winston:\x20not\x20exiting\x20process.'),_0x2fa605=![]);function _0x3cd140(){const _0xb844b=_0x4dc6d9;debug(_0xb844b(0xfc),_0x2fa605),debug(_0xb844b(0x133),process[_0xb844b(0x129)]),_0x2fa605&&!process['_exiting']&&(_0x1761cb&&clearTimeout(_0x1761cb),process['exit'](0x1));}if(!_0x74d86a||_0x74d86a[_0x4dc6d9(0x132)]===0x0)return process[_0x4dc6d9(0x110)](_0x3cd140);asyncForEach(_0x74d86a,(_0x458ee1,_0x469182)=>{const _0x4c81ba=_0x4dc6d9,_0x153b07=once(_0x469182),_0x14adce=_0x458ee1['transport']||_0x458ee1;function _0x40bbc3(_0x1bbe3e){return()=>{debug(_0x1bbe3e),_0x153b07();};}_0x14adce[_0x4c81ba(0x114)]=!![],_0x14adce[_0x4c81ba(0x113)](_0x4c81ba(0x118),_0x40bbc3(_0x4c81ba(0x134))),_0x14adce[_0x4c81ba(0x113)](_0x4c81ba(0x143),_0x40bbc3(_0x4c81ba(0x143)));},()=>_0x2fa605&&_0x3cd140()),this[_0x4dc6d9(0xff)][_0x4dc6d9(0x116)](_0x12d164),_0x2fa605&&(_0x1761cb=setTimeout(_0x3cd140,0xbb8));}['_getExceptionHandlers'](){const _0xf3bd6d=a393_0x2eadd9;return this[_0xf3bd6d(0xff)]['transports'][_0xf3bd6d(0x11e)](_0x18d16e=>{const _0x4826cd=_0xf3bd6d,_0x152a58=_0x18d16e[_0x4826cd(0x139)]||_0x18d16e;return _0x152a58[_0x4826cd(0x141)];});}};